(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"07MT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("rFXv"),r=n("69JI"),i=n("L8qw"),l=n("R3tF"),s=n("TYT/"),a=n("rFXv"),c=n("69JI"),d=n("TlMK"),m=n("F3SW"),p=n("xy2U"),u=n("RiNP"),y=n("oRuy"),h=n("wKFB"),v=n("611w"),f=n("hIFC");function g(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"hy-button",14),s.\u0275\u0275listener("onClick",(function(){s.\u0275\u0275restoreView(n);var e=t.item;return s.\u0275\u0275nextContext(2).onClick_EditUser(e)})),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(1,"hy-button",15),s.\u0275\u0275listener("onClick",(function(){s.\u0275\u0275restoreView(n);var e=t.item;return s.\u0275\u0275nextContext(2).onClick_DelUser(e)})),s.\u0275\u0275elementEnd()}}function S(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"td"),s.\u0275\u0275element(1,"hy-cell",11),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"td"),s.\u0275\u0275element(3,"hy-cell",12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"td"),s.\u0275\u0275elementStart(5,"hy-cell",13),s.\u0275\u0275template(6,g,2,0,"ng-template"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){var n=t.item,o=t.index;s.\u0275\u0275advance(1),s.\u0275\u0275property("item",n)("index",o),s.\u0275\u0275advance(2),s.\u0275\u0275property("item",n)("index",o),s.\u0275\u0275advance(2),s.\u0275\u0275property("item",n)("index",o)}}t.UserComponent=function(){function e(e,t){this.modelService=e,this.loginService=t}return e.prototype.ngOnInit=function(){this.queryUserList()},e.prototype.queryUserList=function(){l.$hyapi.io.post(this.modelService,"Sysmngr/SysUserData/userQuery",{},{showMsg:!1,glt:["glt_\u7528\u6237\u5217\u8868"]})},e.prototype.newUser=function(){l.$hyapi.model.initGt(this.modelService,"gt_\u7528\u6237\u4fe1\u606f")},e.prototype.saveUser=function(){var t=this,n=this.modelService["gt_\u7528\u6237\u4fe1\u606f"];if(n.id||n.password_input)if(n.password_input===n.password_check){var o={};if(o.sysUser=i.ObjectUtil.copyByJson(this.modelService["gt_\u7528\u6237\u4fe1\u606f"]),o.password=n.password_input!==e.noChange_Password?this.loginService.encodePw(n.password_input):e.noChange_Password,o.zenSysUserRole=[],o.sysUser["\u89d2\u8272"]&&o.sysUser["\u89d2\u8272"].length>0)for(var r=0;r<o.sysUser["\u89d2\u8272"].length;r++)o.zenSysUserRole.push({roleId:o.sysUser["\u89d2\u8272"][r]});delete o.sysUser.password_input,delete o.sysUser.password_check,delete o.sysUser["\u89d2\u8272"],l.$hyapi.io.post(t.modelService,"Sysmngr/SysUserData/userSave",o,{showMsg:!0,successFn:function(e){t.modelService["gt_\u7528\u6237\u4fe1\u606f"].id=e.datas.userId,t.queryUserList()}})}else l.$hyapi.msg.createTips("error","\u5bc6\u7801\u548c\u786e\u8ba4\u5bc6\u7801\u4e0d\u4e00\u81f4");else l.$hyapi.msg.createTips("error","\u65b0\u6ce8\u518c\u7528\u6237\u5bc6\u7801\u5fc5\u987b\u586b\u5199")},e.prototype.onClick_DelUser=function(e,t){l.$hyapi.io.post((t=t||this).modelService,"Sysmngr/SysUserData/userDelete",[e.id],{showMsg:!0,successFn:function(n){t.queryUserList(),(t.modelService["gt_\u7528\u6237\u4fe1\u606f"].id=e.id)&&t.newUser()}})},e.prototype.onClick_EditUser=function(t){var n=this.modelService;l.$hyapi.io.post(n,"Sysmngr/SysUserData/userget/"+t.id,{},{showMsg:!1,successFn:function(t){if(n["gt_\u7528\u6237\u4fe1\u606f"]=t.datas["gt_\u7528\u6237\u4fe1\u606f"],n["gt_\u7528\u6237\u4fe1\u606f"].id&&(n["gt_\u7528\u6237\u4fe1\u606f"].password_input=n["gt_\u7528\u6237\u4fe1\u606f"].password_check=e.noChange_Password),t.datas["glt_\u7528\u6237\u89d2\u8272"]&&t.datas["glt_\u7528\u6237\u89d2\u8272"].length>0){n["gt_\u7528\u6237\u4fe1\u606f"]["\u89d2\u8272"]=[];for(var o=0;o<t.datas["glt_\u7528\u6237\u89d2\u8272"].length;o++)n["gt_\u7528\u6237\u4fe1\u606f"]["\u89d2\u8272"].push(t.datas["glt_\u7528\u6237\u89d2\u8272"][o].roleId)}}})},e.noChange_Password="#$nochange$#",e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(a.ModelService),s.\u0275\u0275directiveInject(c.LoginService))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-user"]],features:[s.\u0275\u0275ProvidersFeature([o.ModelService,r.LoginService])],decls:14,vars:6,consts:[[1,"hy-layout-content"],["title","\u7528\u6237\u5217\u8868"],["title","\u7528\u6237\u4fe1\u606f"],["title","\u59d3\u540d","model","name","ckMaxLength","100",3,"ckRequired"],["title","\u767b\u5f55\u540d","model","loginName","ckMaxLength","100",3,"ckRequired"],["title","\u89d2\u8272","mode","multiple","dic","dd_\u89d2\u8272",3,"ckRequired"],["title","\u5bc6\u7801","type","password","model","password_input","ckMaxLength","50",3,"ckRequired"],["title","\u786e\u8ba4\u5bc6\u7801","type","password","model","password_check","ckMaxLength","50",3,"ckRequired"],[1,"nc-element-center","nc-buttons"],["title","\u65b0\u589e",3,"check","onClick"],["title","\u4fdd\u5b58",3,"onClick"],["type","text","title","\u59d3\u540d","model","name",3,"item","index"],["type","text","title","\u767b\u5f55\u540d","model","loginName",3,"item","index"],["type","button","title","\u64cd\u4f5c",3,"item","index"],["title","\u4fee\u6539","btnClass","btn-circle btn-xs",3,"onClick"],["title","\u5220\u9664","btnClass","btn-circle btn-xs",3,"onClick"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"hy-form"),s.\u0275\u0275elementStart(2,"hy-glt",1),s.\u0275\u0275template(3,S,7,6,"ng-template"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"hy-form"),s.\u0275\u0275elementStart(5,"hy-gt",2),s.\u0275\u0275element(6,"hy-text",3),s.\u0275\u0275element(7,"hy-text",4),s.\u0275\u0275element(8,"hy-select",5),s.\u0275\u0275element(9,"hy-text",6),s.\u0275\u0275element(10,"hy-text",7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"div",8),s.\u0275\u0275elementStart(12,"hy-button",9),s.\u0275\u0275listener("onClick",(function(){return t.newUser()})),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"hy-button",10),s.\u0275\u0275listener("onClick",(function(){return t.saveUser()})),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(6),s.\u0275\u0275property("ckRequired",!0),s.\u0275\u0275advance(1),s.\u0275\u0275property("ckRequired",!0),s.\u0275\u0275advance(1),s.\u0275\u0275property("ckRequired",!0),s.\u0275\u0275advance(1),s.\u0275\u0275property("ckRequired",!0),s.\u0275\u0275advance(1),s.\u0275\u0275property("ckRequired",!0),s.\u0275\u0275advance(2),s.\u0275\u0275property("check",!1))},directives:[d.HyFormComponent,m.HyGltComponent,p.HyGtComponent,u.HyTextComponent,y.HySelectComponent,h.HyButtonComponent,v.NzTableCellDirective,f.HyCellComponent],styles:[""]}),e}()},Bf31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("rFXv"),r=n("OBzm"),i=n("tQM9"),l=n("R3tF"),s=n("XFX5"),a=n("TYT/"),c=n("rFXv"),d=n("TlMK"),m=n("F3SW"),p=n("xy2U"),u=n("RiNP"),y=n("wKFB"),h=n("Valr"),v=n("XFX5"),f=n("611w"),g=n("hIFC");function S(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"hy-button",15),a.\u0275\u0275listener("onClick",(function(){a.\u0275\u0275restoreView(n);var e=t.item;return a.\u0275\u0275nextContext(2).onClick_EditRole(e)})),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(1,"hy-button",16),a.\u0275\u0275listener("onClick",(function(){a.\u0275\u0275restoreView(n);var e=t.item;return a.\u0275\u0275nextContext(2).onClick_DelRole(e)})),a.\u0275\u0275elementEnd()}}function C(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275element(1,"hy-cell",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"td"),a.\u0275\u0275elementStart(3,"hy-cell",14),a.\u0275\u0275template(4,S,2,0,"ng-template"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=t.item,o=t.index;a.\u0275\u0275advance(1),a.\u0275\u0275property("item",n)("index",o),a.\u0275\u0275advance(2),a.\u0275\u0275property("item",n)("index",o)}}var _=function(e){return{"nc-hide":e}};t.RoleComponent=function(){function e(e){this.modelService=e,this.treeDatas=[]}return e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnInit=function(){this.queryRoleList(),this.treeDatas=r.NcUtil.menu.menuDatas2HyTreeDatas(i.AppGlobal.menu),this.ori_datas=JSON.stringify(this.treeDatas)},e.prototype.queryRoleList=function(){l.$hyapi.io.post(this.modelService,"Sysmngr/SysRoleData/roleQuery",{},{glt:["glt_\u89d2\u8272\u5217\u8868"],showMsg:!1,successFn:function(e){}})},e.prototype.newRole=function(e){e=e||this,l.$hyapi.model.initGt(this.modelService,"gt_\u89d2\u8272\u4fe1\u606f"),e.hyTreeComponent.expandAll=!0},e.prototype.onClick_DelRole=function(e,t){l.$hyapi.io.post((t=t||this).modelService,"Sysmngr/SysRoleData/roleDelete",[e.id],{showMsg:!0,successFn:function(n){t.queryRoleList(),(t.modelService["gt_\u89d2\u8272\u4fe1\u606f"].id=e.id)&&t.newRole(t)}})},e.prototype.onClick_EditRole=function(e){var t=this;t.treeDatas=[],t.treeDatas=JSON.parse(t.ori_datas),l.$hyapi.model.initGt(t.modelService,"gt_\u89d2\u8272\u4fe1\u606f"),l.$hyapi.model.setGtData(t.modelService,"gt_\u89d2\u8272\u4fe1\u606f",e),l.$hyapi.io.post(t.modelService,"Sysmngr/SysRoleData/roleget/"+e.id,{},{showMsg:!1,successFn:function(e){var n=e.datas["glt_\u89d2\u8272\u6743\u9650"],o=[];if(n){for(var r=0;r<n.length;r++)t.setCheckNode(t.treeDatas,n[r]);t.treeDatas&&t.treeDatas.forEach((function(e){o.push(e)})),t.treeDatas=o}}})},e.prototype.setCheckNode=function(e,t){for(var n=0;n<e.length;n++)e[n]&&this.dealCheckNode_loop(e,e[n],t)},e.prototype.dealCheckNode_loop=function(e,t,n){if(t.children)for(var o=0;o<t.children.length;o++)t.children[o]&&this.dealCheckNode_loop(e,t.children[o],n);else t.id==n.menuId&&(t.checked=!0)},e.prototype.saveRole=function(){var e=this;l.$hyapi.io.post(e.modelService,"Sysmngr/SysRoleData/roleSave",this.modelService["gt_\u89d2\u8272\u4fe1\u606f"],{showMsg:!0,successFn:function(t){e.modelService["gt_\u89d2\u8272\u4fe1\u606f"].id=t.datas.roleId,e.queryRoleList()}})},e.prototype.saveMenu=function(){var e=this.hyTreeComponent.getzTree(),t=[];for(var n in e)this.loopMenuDatas(e[n].origin,t);l.$hyapi.io.post(this.modelService,"Sysmngr/SysRoleData/roleSaveMenu/"+this.modelService["gt_\u89d2\u8272\u4fe1\u606f"].id,t,{showMsg:!0,successFn:function(e){}})},e.prototype.loopMenuDatas=function(e,t){e&&this.dealMenuDatas_loop(e,t)},e.prototype.dealMenuDatas_loop=function(e,t){if(e.children)for(var n=0;n<e.children.length;n++)e.children[n]&&this.dealMenuDatas_loop(e.children[n],t);else if(e.checked&&1==e.checked){var o={};o.menuId=e.id,o.menuName=e.title,t.push(o)}},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(c.ModelService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-role"]],viewQuery:function(e,t){var n;1&e&&a.\u0275\u0275viewQuery(s.HyTreeComponent,!0),2&e&&a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.hyTreeComponent=n.first)},features:[a.\u0275\u0275ProvidersFeature([o.ModelService])],decls:18,vars:8,consts:[[1,"hy-layout-content"],["title","\u89d2\u8272\u5217\u8868"],["title","\u89d2\u8272\u4fe1\u606f"],["title","\u89d2\u8272\u540d","model","name","ckMaxLength","100",3,"ckRequired"],[1,"nc-element-center","nc-buttons"],["title","\u65b0\u589e",3,"check","onClick"],["title","\u4fdd\u5b58\u89d2\u8272\u4fe1\u606f",3,"onClick"],[3,"ngClass"],[1,"nc-element-center"],[1,"row"],[1,"col-md-4","col-md-offset-4"],[3,"datas","checkable","expandAll"],["title","\u4fdd\u5b58\u83dc\u5355\u6743\u9650","btnType","\u4fdd\u5b58",3,"onClick"],["type","text","title","\u89d2\u8272\u540d","model","name",3,"item","index"],["type","button","title","\u64cd\u4f5c",3,"item","index"],["title","\u4fee\u6539","size","small",3,"onClick"],["title","\u5220\u9664","size","small",3,"onClick"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"hy-form"),a.\u0275\u0275elementStart(2,"hy-glt",1),a.\u0275\u0275template(3,C,5,4,"ng-template"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"hy-form"),a.\u0275\u0275elementStart(5,"hy-gt",2),a.\u0275\u0275element(6,"hy-text",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",4),a.\u0275\u0275elementStart(8,"hy-button",5),a.\u0275\u0275listener("onClick",(function(){return t.newRole(null)})),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"hy-button",6),a.\u0275\u0275listener("onClick",(function(){return t.saveRole()})),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"hy-form"),a.\u0275\u0275elementStart(11,"div",7),a.\u0275\u0275elementStart(12,"div",8),a.\u0275\u0275elementStart(13,"div",9),a.\u0275\u0275elementStart(14,"div",10),a.\u0275\u0275element(15,"hy-tree",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"div",4),a.\u0275\u0275elementStart(17,"hy-button",12),a.\u0275\u0275listener("onClick",(function(){return t.saveMenu()})),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(6),a.\u0275\u0275property("ckRequired",!0),a.\u0275\u0275advance(2),a.\u0275\u0275property("check",!1),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(6,_,null==(null==t.modelService["gt_\u89d2\u8272\u4fe1\u606f"]?null:t.modelService["gt_\u89d2\u8272\u4fe1\u606f"].id))),a.\u0275\u0275advance(4),a.\u0275\u0275property("datas",t.treeDatas)("checkable",!0)("expandAll",!0))},directives:[d.HyFormComponent,m.HyGltComponent,p.HyGtComponent,u.HyTextComponent,y.HyButtonComponent,h.NgClass,v.HyTreeComponent,f.NzTableCellDirective,g.HyCellComponent],styles:[""]}),e}()},L8qw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUtil=function(){function e(){}return e.copyByJson=function(e){return JSON.parse(JSON.stringify(e))},e}()},ZCN1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Bf31"),r=n("07MT"),i=n("DUip"),l=n("xfGt"),s=n("TYT/"),a=(n("DUip"),[{path:"",children:[{path:"user",component:r.UserComponent},{path:"role",component:o.RoleComponent}]}]);t.RBACModule=function(){function e(){}return e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[l.BaseModule,i.RouterModule.forChild(a)]]}),e}()}}]);